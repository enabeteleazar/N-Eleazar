# Utilisez l'image de base de Python pour ARM
FROM arm32v7/python:3.8-slim-buster

# Installation des dépendances nécessaires
RUN apt-get update && apt-get install -y \
    git \
    && rm -rf /var/lib/apt/lists/*

# Installation de TensorFlow Lite pour le Raspberry Pi
RUN pip install https://github.com/google-coral/pycoral/releases/download/release-frogfish/tflite_runtime-2.7.2-cp38-cp38-linux_armv7l.whl

# Clonage du dépôt GPT-2 adapté pour TensorFlow Lite
RUN git clone https://github.com/karpathy/minGPT.git /gpt2

# Copie des fichiers nécessaires
WORKDIR /gpt2
COPY . .

# Commande par défaut pour lancer votre application
CMD ["python3", "run_gpt2.py"]
